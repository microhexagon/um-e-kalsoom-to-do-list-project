<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title> To-Do list App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Enable dark mode class strategy
    tailwind.config = {
      darkMode: 'class',
    }
  </script>
  <style>
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #ec4899;
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: content-box;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-200 via-pink-100 to-white dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 transition-colors duration-700 text-gray-900 dark:text-gray-100 font-sans">

  <!-- 1. Create a basic HTML structure for the app. -->
  <div class="max-w-3xl w-full mx-4 bg-white dark:bg-gradient-to-tr dark:from-gray-900 dark:via-pink-900 dark:to-purple-900 rounded-3xl shadow-2xl p-10 transition-all duration-700">
    
    <!-- Dark Mode toggle button -->
    <div class="flex justify-end mb-6">
      <button id="theme-toggle" class="px-5 py-2 rounded-full bg-pink-500 hover:bg-pink-600 dark:bg-pink-600 dark:hover:bg-pink-700 text-white font-semibold shadow-lg transition-colors duration-300 focus:outline-none focus:ring-4 focus:ring-pink-300 dark:focus:ring-pink-700">
        Toggle Mode
      </button>
    </div>

    <!-- App Title -->
    <h1 class="text-4xl font-extrabold text-center mb-8 bg-clip-text text-transparent bg-gradient-to-r from-pink-500 via-pink-600 to-pink-700 dark:from-pink-400 dark:via-pink-500 dark:to-pink-600">
      To-Do List
    </h1>

    <!-- 2 & 3. Use TailwindCSS to style the app & Add an input field and "Add Task" button. -->
    <div class="flex flex-col sm:flex-row gap-4 mb-6">
      <input type="text" id="taskInput" placeholder="Add a new task..." class="flex-1 p-3 rounded-xl border border-pink-300 focus:outline-none focus:ring-4 focus:ring-pink-300 dark:bg-gray-800 dark:border-pink-700 dark:focus:ring-pink-600 dark:text-gray-100 shadow-md transition" />
      <input type="date" id="dueDateInput" class="p-3 rounded-xl border border-pink-300 focus:outline-none focus:ring-4 focus:ring-pink-300 dark:bg-gray-800 dark:border-pink-700 dark:focus:ring-pink-600 dark:text-gray-100 shadow-md transition" />
      <select id="priorityInput" class="p-3 rounded-xl border border-pink-300 focus:outline-none focus:ring-4 focus:ring-pink-300 dark:bg-gray-800 dark:border-pink-700 dark:focus:ring-pink-600 dark:text-gray-100 shadow-md transition">
        <option value="Low">Low Priority</option>
        <option value="Medium">Medium Priority</option>
        <option value="High">High Priority</option>
      </select>
      <button onclick="addTask()" class="bg-pink-500 hover:bg-pink-600 dark:bg-pink-700 dark:hover:bg-pink-800 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-colors duration-300">
        Add Task
      </button>
    </div>

    <!-- 10. Add a filter option to show completed/incomplete tasks separately -->
    <div class="flex justify-center gap-3 mb-8 flex-wrap">
      <button class="filter-btn px-5 py-2 rounded-full border-2 border-pink-400 text-pink-600 dark:border-pink-600 dark:text-pink-400 font-medium hover:bg-pink-100 dark:hover:bg-pink-800 transition" data-filter="all" onclick="setFilter('all')">All</button>
      <button class="filter-btn px-5 py-2 rounded-full border-2 border-pink-400 text-pink-600 dark:border-pink-600 dark:text-pink-400 font-medium hover:bg-pink-100 dark:hover:bg-pink-800 transition" data-filter="completed" onclick="setFilter('completed')">Completed</button>
      <button class="filter-btn px-5 py-2 rounded-full border-2 border-pink-400 text-pink-600 dark:border-pink-600 dark:text-pink-400 font-medium hover:bg-pink-100 dark:hover:bg-pink-800 transition" data-filter="incomplete" onclick="setFilter('incomplete')">Incomplete</button>
      <button onclick="toggleSortOrder()" class="px-5 py-2 rounded-full border-2 border-yellow-400 text-yellow-500 dark:border-yellow-600 dark:text-yellow-400 font-medium hover:bg-yellow-100 dark:hover:bg-yellow-900 transition">Sort by Priority</button>
    </div>

    <!-- 4. Display a list of tasks dynamically -->
    <ul id="taskList" class="space-y-4 max-h-[400px] overflow-y-auto"></ul>
  </div>

<script>
  // 7. Store tasks in local storage to persist data
  let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
  let currentFilter = 'all';  // 10. for filter option
  let sortByPriority = false; // 12. for sorting tasks

  function saveTasks() {
    localStorage.setItem('tasks', JSON.stringify(tasks));
  }

  // 5. Capture user input and add tasks to the list
  function addTask() {
    const textInput = document.getElementById('taskInput');
    const dueDateInput = document.getElementById('dueDateInput');
    const priorityInput = document.getElementById('priorityInput');

    const text = textInput.value.trim();
    const dueDate = dueDateInput.value;
    const priority = priorityInput.value;

    if (text === '') return;

    tasks.push({ text, dueDate, priority, completed: false });
    saveTasks();
    renderTasks();

    textInput.value = '';
    dueDateInput.value = '';
    priorityInput.value = 'Low';
    textInput.focus();
  }

  // 10. Set filter to show all/completed/incomplete tasks
  function setFilter(filter) {
    currentFilter = filter;
    document.querySelectorAll(".filter-btn").forEach(btn => {
      if (btn.dataset.filter === filter) {
        btn.classList.add("bg-pink-500", "text-white", "border-pink-500");
      } else {
        btn.classList.remove("bg-pink-500", "text-white", "border-pink-500");
      }
    });
    renderTasks();
  }

  // 12. Toggle sorting tasks by priority
  function toggleSortOrder() {
    sortByPriority = !sortByPriority;
    renderTasks();
  }

  // 4,6,8,9,10,12 task list with all features integrated
  function renderTasks() {
    const taskList = document.getElementById('taskList');
    taskList.innerHTML = '';

    // 10. Filter tasks based on current filter state
    let displayTasks = tasks.filter(task => {
      if (currentFilter === 'all') return true;
      if (currentFilter === 'completed') return task.completed;
      if (currentFilter === 'incomplete') return !task.completed;
    });

    // 12. Sort tasks by priority if toggled on
    if (sortByPriority) {
      const priorityOrder = { High: 1, Medium: 2, Low: 3 };
      displayTasks.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);
    }

    displayTasks.forEach((task, index) => {
      const li = document.createElement('li');
      // 2. Styling the task items using TailwindCSS
      li.className = 'flex justify-between items-center bg-gradient-to-r from-pink-50 via-pink-100 to-pink-200 dark:from-pink-900 dark:via-pink-800 dark:to-purple-900 border border-pink-300 dark:border-pink-700 p-4 rounded-2xl shadow-md transition-colors duration-500';

      const label = document.createElement('label');
      label.className = 'flex items-center gap-4 flex-1';

      // 6. Checkbox to mark tasks as completed
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.checked = task.completed;
      checkbox.className = 'accent-pink-600 w-6 h-6 cursor-pointer';
      checkbox.addEventListener('change', () => {
        task.completed = checkbox.checked;
        saveTasks();
        renderTasks();
      });

      const details = document.createElement('div');
      const taskText = document.createElement('p');
      taskText.textContent = task.text;
      taskText.className = 'text-lg font-medium';

      // 9. Style completed tasks with strikethrough
      if (task.completed) {
        taskText.classList.add('line-through', 'text-gray-400', 'dark:text-gray-500');
      }

      const meta = document.createElement('small');
      meta.className = 'block mt-1 text-sm text-gray-600 dark:text-gray-400';
      // 12. Showing due date and priority
      meta.textContent = `Due: ${task.dueDate || 'None'} | Priority: ${task.priority}`;

      details.appendChild(taskText);
      details.appendChild(meta);

      label.appendChild(checkbox);
      label.appendChild(details);

      // 8. Add delete button to each task
      const delBtn = document.createElement('button');
      delBtn.textContent = 'âœ•';
      delBtn.className = 'text-pink-600 dark:text-pink-400 hover:text-pink-800 dark:hover:text-pink-200 text-xl font-bold transition-colors duration-300 ml-4';
      delBtn.addEventListener('click', () => {
        tasks.splice(index, 1);
        saveTasks();
        renderTasks();
      });

      li.appendChild(label);
      li.appendChild(delBtn);

      taskList.appendChild(li);
    });
  }

  // 2. Dark mode toggle button 
  const toggleBtn = document.getElementById('theme-toggle');

  toggleBtn.addEventListener('click', () => {
    document.documentElement.classList.toggle('dark');

    // Save preference 
    if (document.documentElement.classList.contains('dark')) {
      localStorage.setItem('theme', 'dark');
    } else {
      localStorage.setItem('theme', 'light');
    }
  });

  // Initialize theme & render tasks on page load
  window.addEventListener('DOMContentLoaded', () => {
    // 7. localStorage or system default
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.documentElement.classList.add('dark');
    } else if (savedTheme === 'light') {
      document.documentElement.classList.remove('dark');
    } else {
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
      }
    }

    // 4,7  load from localStorage
    renderTasks();
    setFilter('all');  
  });
</script>
</body>
</html>






